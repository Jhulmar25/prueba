<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Incidentes - Serenazgo San Isidro</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="container">
        <h2>Reporte de Incidentes</h2>
        <label for="usuario">Tipo de Usuario:</label>
        <select id="usuario">
            <option value="sereno_pie">Sereno a Pie</option>
            <option value="motorizado">Motorizado</option>
            <option value="drones">Escuadrón de Drones</option>
        </select>

        <label for="incidente">Tipo de Incidente:</label>
        <select id="incidente">
            <option value="robo">Robo o hurto</option>
            <option value="accidente">Accidente de tránsito</option>
            <option value="violencia">Violencia familiar o de género</option>
            <option value="sospechoso">Personas sospechosas</option>
            <option value="medico">Emergencias médicas</option>
            <option value="incendio">Incendios o fugas de gas</option>
            <option value="alcohol">Consumo de alcohol o drogas</option>
            <option value="vandalismo">Actos de vandalismo</option>
            <option value="obstruccion">Obstrucción de la vía pública</option>
        </select>

        <button onclick="enviarReporte()">Enviar Reporte</button>

        <div id="map"></div>
    </div>

    <script>
        let map;

        function inicializarMapa() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: -12.097, lng: -77.037 },
                zoom: 15
            });
        }

        function enviarReporte() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    const { latitude, longitude } = position.coords;

                    const { AdvancedMarkerElement } = google.maps.marker;
                    new AdvancedMarkerElement({
                        map: map,
                        position: { lat: latitude, lng: longitude },
                        title: "Nuevo Incidente"
                    });

                    map.setCenter({ lat: latitude, lng: longitude });

                    alert("Reporte enviado y registrado en el mapa.");
                });
            } else {
                alert("Geolocalización no soportada en este navegador.");
            }
        }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=TU_API_KEY&v=beta&callback=inicializarMapa" defer></script>
</body>
</html>
